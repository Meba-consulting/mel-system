<div
  class="w-100 no-print"
  style="height: 50px; border-bottom: solid 1px #eee; padding: 15px"
>
  <!-- <span>Report</span> -->
  <button
    mat-stroked-button
    (click)="printPDF($event, formattedTrackedEntityInstanceData)"
  >
    Print
  </button>
  <button
    mat-stroked-button
    class="ml-2"
    (click)="
      download(
        $event,
        'report',
        formattedTrackedEntityInstanceData?.reportHeader
      )
    "
  >
    Download to Word
  </button>
  <span class="toolbar-spacer"></span>
  <span class="float-right"></span>
  <button
    class="float-right"
    mat-icon-button
    mat-dialog-close
    matTooltip="close"
  >
    <mat-icon>close</mat-icon>
  </button>
</div>
<mat-dialog-content class="mat-typography">
  <div class="h4 text-center">
    <img height="80" src="assets/img/logo_lhrc.png" />
  </div>
  <div id="report" #report>
    <div
      class="w-100"
      style="padding: 15px 30px; margin-bottom: 20px"
      *ngFor="let formattedTrackedEntityInstanceData of dataToRender"
    >
      <div class="h3 text-center">
        <b> Legal and Human Rights Center - Tanzania </b>
      </div>
      <div class="h4 text-center">
        <b>
          {{ formattedTrackedEntityInstanceData?.reportHeader }}
        </b>
      </div>
      <div
        class="text-justify"
        *ngFor="
          let otherDetail of formattedTrackedEntityInstanceData?.otherDetails
        "
      >
        <p class="text-justify">
          <b>{{ otherDetail?.name }}:</b>{{ otherDetail?.value }}
        </p>
      </div>
      <div class="stages">
        <div
          *ngFor="let stage of program?.programStages"
          style="padding: 15px 2px"
        >
          <div class="h5 text-left w-100" style="border-bottom: solid 1px #eee">
            <b>
              {{ stage?.name }}
            </b>
          </div>
          <div
            *ngIf="formattedTrackedEntityInstanceData[stage?.id]?.length === 0"
          >
            <p class="text-left">No data</p>
          </div>
          <div
            class="w-100"
            style="overflow: auto"
            *ngIf="formattedTrackedEntityInstanceData[stage?.id]?.length > 0"
          >
            <table class="table table-bordered">
              <thead>
                <tr>
                  <th>SN</th>
                  <th
                    class="text-center"
                    *ngFor="
                      let programStageDataElement of stage?.programStageDataElements
                    "
                  >
                    {{ programStageDataElement.dataElement.name }}
                  </th>
                  <th>Reported by</th>
                </tr>
              </thead>
              <tbody>
                <tr
                  *ngFor="
                    let dataRow of formattedTrackedEntityInstanceData[
                      stage?.id
                    ];
                    let count = index
                  "
                >
                  <td>
                    {{ count + 1 }}
                  </td>
                  <td
                    *ngFor="
                      let programStageDataElement of stage?.programStageDataElements
                    "
                  >
                    {{
                      dataRow?.keyedDataValues[
                        programStageDataElement?.dataElement?.id
                      ]
                        ? dataRow?.keyedDataValues[
                            programStageDataElement?.dataElement?.id
                          ]?.value
                        : ''
                    }}
                  </td>
                  <td>
                    {{ dataRow.storedBy }}
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <img
    width="100%"
    style="margin-top: 40px"
    height="50"
    src="assets/img/footer_banner_lhrc.png"
  />
</mat-dialog-content>
