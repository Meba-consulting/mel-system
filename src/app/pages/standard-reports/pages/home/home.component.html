<div class="h4 p-3">Reports</div>
<div style="margin-top: 15px" *ngIf="!(currentUser$ | async)">
  <mat-progress-bar mode="indeterminate"></mat-progress-bar>
</div>
<div
  style="height: 100%; background-color: #fff"
  class="row"
  *ngIf="currentUser$ | async"
>
  <div class="col-md-12 standard-reports-home-page">
    <mat-tab-group
      [selectedIndex]="selectedTab.value"
      (selectedIndexChange)="selectedTab.setValue($event)"
    >
      <mat-tab label="Standard reports" (click)="changeTab(0)">
        <div
          style="background-color: transparent"
          *ngIf="selectedTab.value == 0"
        >
          <div class="row p-2">
            <div class="col-md-3">
              <div *ngIf="currentUser$ | async">
                <app-report-groups
                  [currentUser]="currentUser$ | async"
                  (selectedReportGroup)="onSelectReportGroup($event)"
                >
                </app-report-groups>
              </div>
              <div style="width: 100%" *ngIf="!(currentUser$ | async)">
                <mat-progress-bar mode="indeterminate"></mat-progress-bar>
              </div>
            </div>
            <div class="col-md-9">
              <div
                *ngIf="
                  (reportsList$ | async) &&
                  (reportsList$ | async)?.length > 0 &&
                  isReportGroupSet &&
                  currentReportGroup
                "
              >
                <app-reports-list
                  [reports]="reportsList$ | async"
                  [reportGroup]="currentReportGroup"
                ></app-reports-list>
              </div>
              <div
                class="col-12"
                *ngIf="
                  !(reportsList$ | async) ||
                  !(currentUser$ | async) ||
                  !isReportGroupSet ||
                  !currentReportGroup
                "
              >
                <mat-progress-bar mode="indeterminate"></mat-progress-bar>
              </div>
            </div>
          </div>
        </div>
      </mat-tab>
      <mat-tab label="Uploaded reports" (click)="changeTab(1)">
        <div class="p-2" *ngIf="selectedTab.value == 1">
          <app-uploaded-reports></app-uploaded-reports>
        </div>
      </mat-tab>
      <!-- <mat-tab label="Analysis tools" *ngIf="selectedTab.value == 2">
        <div style="float: left">
          <button
            style="padding: 0px; float: left"
            mat-stroked-button
            style="border: none"
          >
            <a
              href="../../../dhis-web-pivot/index.html"
              style="text-decoration: none"
              target="_blank"
              >Pivot Table</a
            >
          </button>
          <button
            style="padding: 0px; float: left"
            mat-stroked-button
            style="border: none"
          >
            <a
              href="../../../dhis-web-data-visualizer/index.html#/"
              style="text-decoration: none"
              target="_blank"
              >Data Visualizer</a
            >
          </button>
        </div>
      </mat-tab> -->
    </mat-tab-group>
  </div>
</div>

<router-outlet></router-outlet>
